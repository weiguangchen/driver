"use strict";const e=require("../../common/vendor.js"),o=require("../../stores/app.js"),n=require("../../utils/token.js"),a=require("../../api/index.js");if(!Array){(e.resolveComponent("uv-search")+e.resolveComponent("uv-navbar")+e.resolveComponent("uv-tabs")+e.resolveComponent("uv-image")+e.resolveComponent("my-empty")+e.resolveComponent("my-login-drawer")+e.resolveComponent("my-tabbar"))()}Math||((()=>"../../uni_modules/uv-search/components/uv-search/uv-search.js")+l+(()=>"../../uni_modules/uv-navbar/components/uv-navbar/uv-navbar.js")+(()=>"../../uni_modules/uv-tabs/components/uv-tabs/uv-tabs.js")+(()=>"../../uni_modules/uv-image/components/uv-image/uv-image.js")+(()=>"../../components/my-empty/my-empty.js")+t+(()=>"../../components/my-login-drawer/my-login-drawer.js")+(()=>"../../components/my-tabbar/my-tabbar.js"))();const t=()=>"./components/item.js",l=()=>"./components/FilterDrawer.js",r={__name:"waybill",setup(t){const l=o.useAppStore();e.onLoad((()=>{l.switchTab(1)}));const r=e.ref();function u(){r.value.open()}function s(){e.index.reLaunch({url:"/pages/waybill/waybill"})}const i=e.ref(!1);function v(e){i.value=e.show}const c=e.ref(0);e.onMounted((()=>{let o=e.index.getMenuButtonBoundingClientRect();c.value=o.width+20}));const m=e.ref(""),d=e.ref([{name:"全部",value:""},{name:"已接单",value:"10"},{name:"已完成",value:"8"},{name:"已取消",value:"9"}]);function f({value:e}){m.value=e,T()}const p=e.ref(),g=e.ref(!1),b=e.ref(!1);function h(e){console.log("changeFilter",e),b.value=!0,g.value=e.isFilter,k.value=e.params,T()}const y=e.ref(""),w=e.ref(!1);function x(){b.value=!0,w.value=!!y.value,T()}const j=e.ref([]),k=e.ref({}),C=e.ref(0);async function T(){const{dateMode:o,date:n,...t}=k.value;try{e.index.showLoading({mask:!0});const o=await a.GetOnwayDriver({status:m.value,keyWord:y.value,...t});j.value=o.onwayList,C.value=o.onwayCnt,await e.nextTick$1(),e.index.hideLoading()}catch(l){e.index.hideLoading(),e.index.showToast({title:l.data,icon:"none"})}finally{b.value=!1}}function L(){y.value="",w.value=!1,p.value.reset()}return e.onShow((()=>{n.getToken()&&T()})),(o,a)=>e.e({a:"overflow:"+(i.value?"hidden":"visible"),b:e.o(x),c:e.o(x),d:e.o((e=>y.value=e)),e:e.p({placeholder:"搜索运单号、车牌号",disabled:!e.unref(n.getToken)(),showAction:!1,modelValue:y.value}),f:e.sr(p,"093f1fb7-2,093f1fb7-0",{k:"filter"}),g:e.o(h),h:e.o(v),i:`${c.value}px`,j:e.p({placeholder:!0,"left-icon":""}),k:e.o(f),l:e.p({activeStyle:{fontWeight:"bold",color:"var(--title-color)"},inactiveStyle:{color:"var(--sub-color)"},lineWidth:"32rpx",lineHeight:"8rpx",list:d.value,scrollable:!1,lineColor:"var(--main-color)",customStyle:{background:"#ffffff"}}),m:g.value&&!b.value||w.value&&!b.value},g.value&&!b.value||w.value&&!b.value?{n:e.t(C.value),o:e.p({duration:0,src:"/static/images/filter/redo.png",width:"28rpx",height:"28rpx","custom-style":{marginRight:"4rpx"}}),p:e.o(L)}:{},{q:!e.unref(n.getToken)()},e.unref(n.getToken)()?0===j.value.length?{}:{v:e.f(j.value,((o,n,a)=>({a:o.Id,b:e.o(T,o.Id),c:"093f1fb7-7-"+a,d:e.p({record:o})})))}:{r:e.o(u),s:e.p({showButton:!0,buttonText:"登录",text:"登录后查看运单"})},{t:0===j.value.length,w:e.sr(r,"093f1fb7-8",{k:"loginDrawer"}),x:e.o(s)})}};wx.createPage(r);
