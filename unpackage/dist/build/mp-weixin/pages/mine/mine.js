"use strict";const e=require("../../common/vendor.js"),t=require("../../stores/app.js"),n=require("../../utils/token.js"),i=require("../../stores/user.js"),a=require("../../api/index.js");if(!Array){(e.resolveComponent("uv-navbar")+e.resolveComponent("uv-image")+e.resolveComponent("my-login-drawer")+e.resolveComponent("my-tabbar"))()}Math||((()=>"../../uni_modules/uv-navbar/components/uv-navbar/uv-navbar.js")+(()=>"../../uni_modules/uv-image/components/uv-image/uv-image.js")+(()=>"../../components/my-login-drawer/my-login-drawer.js")+o+(()=>"../../components/my-tabbar/my-tabbar.js"))();const o=()=>"./components/qrcodeModal.js",s={__name:"mine",setup(o){const s=i.useUserStore(),{userInfo:r,defaultCar:c}=e.storeToRefs(s),d=t.useAppStore();function g(t){if(n.getToken())switch(t){case"扫码":!async function(){if(!c.value)return void e.index.showToast({title:"请先添加车辆",icon:"none"});let t={};try{const n=await e.index.scanCode();console.log(n),t=JSON.parse(n.result),console.log(t);const{htQRType:i}=t;if(!i)return void e.index.showToast({title:"无效二维码",icon:"none"})}catch(n){return console.log("无效二维码",n),void e.index.showToast({title:"无效二维码",icon:"none"})}try{e.index.showLoading({mask:!0});const n={scanParam:JSON.stringify({...t})};console.log(n),await a.ScanQR(n),console.log("允许扫码"),e.index.hideLoading();const{assignId:i}=t;e.index.navigateTo({url:`/pages/billDetail/billDetail?assignId=${i}`})}catch(n){e.index.hideLoading(),e.index.showToast({title:n.data,icon:"none"})}}();break;case"二维码":p.value.open();break;case"车辆管理":e.index.navigateTo({url:"/pages/carList/carList"});break;case"数据统计":return void e.index.showToast({title:"敬请期待",icon:"none"});case"卸货地址":e.index.navigateTo({url:"/pages/addressList/addressList"});break;case"我的订单":e.index.navigateTo({url:"/pages/orderList/orderList"});break;case"我的货单":e.index.navigateTo({url:"/pages/manifestList/manifestList"});break;case"问题反馈":break;case"设置":e.index.navigateTo({url:"/pages/setting/setting"})}else h()}e.onLoad((()=>{d.switchTab(2)}));const p=e.ref();function m(){e.index.openOfficialAccountArticle({url:"https://mp.weixin.qq.com/s?__biz=MzkxOTcyODM5OA==&mid=2247483675&idx=1&sn=3f1378b5f85fe5ed6144eb9446f63a32&chksm=c19cf97af6eb706cee30883335ba2e11ab4ebd79c23dac68af13106c2b56e20eee02ddfe656c#rd"})}function u(){e.index.openOfficialAccountArticle({url:"https://mp.weixin.qq.com/s/6Hqb9mbfT_Te9Tu4cD26DQ"})}const l=e.ref();function h(){l.value.open()}function x(){e.index.reLaunch({url:"/pages/mine/mine"})}return(t,i)=>e.e({a:e.p({"left-icon":"",placeholder:!0,"bg-color":"transparent"}),b:e.p({src:e.unref(n.getToken)()?"/static/images/mine/avatar.png":"/static/images/mine/no-avatar.png",width:"100%",height:"100%",duration:0}),c:e.unref(n.getToken)()},e.unref(n.getToken)()?{d:e.t(e.unref(r).Nickname||"暂无昵称"),e:e.t(e.unref(r).Mobile||"")}:{f:e.p({src:"/static/images/arrow3.png",duration:0,width:"32rpx",height:"32rpx","custom-style":{flex:"none"}}),g:e.o(h)},{h:e.p({src:"/static/images/mine/scan.png",width:"56rpx",height:"56rpx",duration:0}),i:e.o((e=>g("扫码"))),j:e.p({src:"/static/images/mine/qrcode.png",width:"56rpx",height:"56rpx",duration:0}),k:e.o((e=>g("二维码"))),l:e.o((e=>g("车辆管理"))),m:e.o((e=>g("数据统计"))),n:e.p({width:"100%",height:"100%",duration:0,src:"/static/images/mine/banner.png"}),o:e.o(m),p:e.p({src:"/static/images/mine/wechat.png",width:"56rpx",height:"56rpx","custom-style":{marginBottom:"4rpx"},duration:0}),q:e.o(m),r:e.p({src:"/static/images/mine/service.png",width:"56rpx",height:"56rpx","custom-style":{marginBottom:"4rpx"},duration:0}),s:e.p({src:"/static/images/mine/guide.png",width:"56rpx",height:"56rpx","custom-style":{marginBottom:"4rpx"},duration:0}),t:e.o(u),v:e.p({src:"/static/images/mine/feedback.png",width:"56rpx",height:"56rpx","custom-style":{marginBottom:"4rpx"},duration:0}),w:e.p({src:"/static/images/mine/setting.png",width:"56rpx",height:"56rpx","custom-style":{marginBottom:"4rpx"},duration:0}),x:e.o((e=>g("设置"))),y:e.sr(l,"ba8f522e-11",{k:"loginDrawer"}),z:e.o(x),A:e.sr(p,"ba8f522e-12",{k:"qrcode"})})}};wx.createPage(s);
