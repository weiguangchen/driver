"use strict";const e=require("../../common/vendor.js"),a=require("../../api/index.js");if(!Array){(e.resolveComponent("uv-navbar")+e.resolveComponent("uv-image")+e.resolveComponent("uv-button")+e.resolveComponent("my-plate"))()}Math||((()=>"../../uni_modules/uv-navbar/components/uv-navbar/uv-navbar.js")+(()=>"../../uni_modules/uv-image/components/uv-image/uv-image.js")+n+(()=>"../../uni_modules/uv-button/components/uv-button/uv-button.js")+(()=>"../../components/my-plate/my-plate.js")+l+t)();const n=()=>"./components/Material.js",l=()=>"./components/MapDrawer.js",t=()=>"./components/StepDrawer.js",u={__name:"billDetail",setup(n){const l=e.ref(),t=e.ref(""),u=e.ref("");e.onLoad((a=>{l.value=e.index.getSystemInfoSync().statusBarHeight,t.value=(null==a?void 0:a.assignId)??"",u.value=(null==a?void 0:a.supplyId)??"",i()}));const v=e.ref({});async function i(){try{const e=await a.GetReceiveAssignDetail({assignId:t.value,supplyId:u.value});v.value={...e,MatList:e.MatList.map((a=>({...a,FullLoad:"0",Load:e.ConfigEnt&&e.ConfigEnt.fullLoadMax?e.ConfigEnt.fullLoadMax:void 0})))}}catch{}}const o=e.computed((()=>`${l.value+56}px`));function r(){e.index.navigateBack()}const d=e.ref();function s(e){var a,n,l,t,u,i,o,r,s,m,E,p,c,f,S,y,T,M,g,b,h,j,L,A,w,C,D,U,O,k,x,B,N,H,P,$;const I={type:e,name:1===e?(null==(n=null==(a=v.value)?void 0:a.SupEnt)?void 0:n.Name)??"":(null==(t=null==(l=v.value)?void 0:l.UnloadEnt)?void 0:t.PlaceName)??"",address:1===e?`${(null==(i=null==(u=v.value)?void 0:u.SupEnt)?void 0:i.Province)??""}${(null==(r=null==(o=v.value)?void 0:o.SupEnt)?void 0:r.City)??""}${(null==(m=null==(s=v.value)?void 0:s.SupEnt)?void 0:m.District)??""}${(null==(p=null==(E=v.value)?void 0:E.SupEnt)?void 0:p.Address)??""}`:`${(null==(f=null==(c=v.value)?void 0:c.UnloadEnt)?void 0:f.Province)??""}${(null==(y=null==(S=v.value)?void 0:S.UnloadEnt)?void 0:y.City)??""}${(null==(M=null==(T=v.value)?void 0:T.UnloadEnt)?void 0:M.District)??""}${(null==(b=null==(g=v.value)?void 0:g.UnloadEnt)?void 0:b.Address)??""}`,user:1===e?(null==(j=null==(h=v.value)?void 0:h.SupEnt)?void 0:j.Linker)??"":(null==(A=null==(L=v.value)?void 0:L.UnloadEnt)?void 0:A.NickName)??"",phone:1===e?(null==(C=null==(w=v.value)?void 0:w.SupEnt)?void 0:C.LinkerMobile)??"":(null==(U=null==(D=v.value)?void 0:D.UnloadEnt)?void 0:U.Mobile)??"",longitude:1===e?null==(k=null==(O=v.value)?void 0:O.SupEnt)?void 0:k.Logitude:null==(B=null==(x=v.value)?void 0:x.UnloadEnt)?void 0:B.Logitude,latitude:1===e?null==(H=null==(N=v.value)?void 0:N.SupEnt)?void 0:H.Latitude:null==($=null==(P=v.value)?void 0:P.UnloadEnt)?void 0:$.Latitude};d.value.open(I)}const m=e.ref();function E(){e.index.makePhoneCall({phoneNumber:v.value.OwnerEnt.LinkerMobile})}function p(){i()}return(a,n)=>e.e({a:e.o(r),b:e.p({bgColor:"rgba(255,255,255,0)"}),c:o.value,d:["0","2"].includes(v.value.EntryAuthened)?1:"",e:"0"===v.value.EntryAuthened},("0"===v.value.EntryAuthened||v.value.EntryAuthened,{}),{f:"2"===v.value.EntryAuthened,g:"0"===v.value.EntryAuthened},"0"===v.value.EntryAuthened||"2"===v.value.EntryAuthened?{}:e.e({i:!v.value.StartTime&&!v.value.EndTime||v.value.StartTime&&e.unref(e.dayjs)().isAfter(v.value.StartTime)&&!v.value.EndTime},!v.value.StartTime&&!v.value.EndTime||v.value.StartTime&&e.unref(e.dayjs)().isAfter(v.value.StartTime)&&!v.value.EndTime?{}:!v.value.EndTime&&v.value.StartTime&&e.unref(e.dayjs)().isBefore(v.value.StartTime)?{k:e.t(e.unref(e.dayjs)(v.value.StartTime).format("MM-DD HH:mm"))}:v.value.EndTime&&v.value.StartTime&&e.unref(e.dayjs)().isBefore(v.value.StartTime)?{m:e.t(e.unref(e.dayjs)(v.value.StartTime).format("MM-DD HH:mm")),n:e.t(e.unref(e.dayjs)(v.value.EndTime).format("MM-DD HH:mm"))}:v.value.StartTime&&e.unref(e.dayjs)().isAfter(v.value.StartTime)&&v.value.EndTime&&e.unref(e.dayjs)().isBefore(v.value.EndTime)||!v.value.StartTime&&v.value.EndTime&&e.unref(e.dayjs)().isBefore(v.value.EndTime)?{p:e.t(e.unref(e.dayjs)(v.value.EndTime).format("MM-DD HH:mm"))}:{},{j:!v.value.EndTime&&v.value.StartTime&&e.unref(e.dayjs)().isBefore(v.value.StartTime),l:v.value.EndTime&&v.value.StartTime&&e.unref(e.dayjs)().isBefore(v.value.StartTime),o:v.value.StartTime&&e.unref(e.dayjs)().isAfter(v.value.StartTime)&&v.value.EndTime&&e.unref(e.dayjs)().isBefore(v.value.EndTime)||!v.value.StartTime&&v.value.EndTime&&e.unref(e.dayjs)().isBefore(v.value.EndTime)}),{h:"2"===v.value.EntryAuthened,q:v.value.SupEnt},v.value.SupEnt?{r:e.t(v.value.SupEnt?v.value.SupEnt.Name:""),s:e.t(v.value.SupEnt?v.value.SupEnt.Province:""),t:e.t(v.value.SupEnt?v.value.SupEnt.City:""),v:e.t(v.value.SupEnt?v.value.SupEnt.District:""),w:e.t(v.value.SupEnt?v.value.SupEnt.Address:""),x:e.o(((...e)=>a.selectAddress&&a.selectAddress(...e))),y:e.p({src:"/static/images/arrow.png",duration:0,width:"24rpx",height:"24rpx"}),z:e.o((e=>s(1)))}:{},{A:v.value.UnloadEnt},v.value.UnloadEnt?{B:e.t(v.value.UnloadEnt?v.value.UnloadEnt.PlaceName:""),C:e.t(v.value.UnloadEnt?v.value.UnloadEnt.Province:""),D:e.t(v.value.UnloadEnt?v.value.UnloadEnt.City:""),E:e.t(v.value.UnloadEnt?v.value.UnloadEnt.District:""),F:e.t(v.value.UnloadEnt?v.value.UnloadEnt.Address:""),G:e.o(((...e)=>a.selectAddress&&a.selectAddress(...e))),H:e.p({src:"/static/images/arrow.png",duration:0,width:"24rpx",height:"24rpx"}),I:e.o((e=>s(2)))}:{},{J:v.value.MatList&&v.value.MatList.length>0},v.value.MatList&&v.value.MatList.length>0?{K:e.f(v.value.MatList,((a,n,l)=>({a:"9e3db46e-3-"+l,b:e.p({record:a,bill:v.value,"border-bottom":n<v.value.MatList.length-1})}))),L:e.o(p)}:{},{M:v.value.OwnerEnt},v.value.OwnerEnt?e.e({N:e.t(v.value.OwnerEnt?v.value.OwnerEnt.OwnerName:""),O:e.t(v.value.OwnerEnt?v.value.OwnerEnt.Linker:""),P:e.t(v.value.OwnerEnt?v.value.OwnerEnt.LinkerMobile:""),Q:v.value.OwnerEnt&&v.value.OwnerEnt.LinkerMobile},v.value.OwnerEnt&&v.value.OwnerEnt.LinkerMobile?{R:e.o(E),S:e.p({shape:"circle",color:"var(--page-bg)","custom-style":{height:"68rpx",color:"var(--main-color)",fontWeight:"bold"}})}:{}):{},{T:v.value.CarEnt},v.value.CarEnt?e.e({U:e.p({plate:v.value.CarEnt.Carno,color:v.value.CarEnt.Color}),V:e.t(v.value.CarEnt.CarType),W:v.value.DriverEnt},v.value.DriverEnt?{X:e.t(v.value.DriverEnt?v.value.DriverEnt.NickName:""),Y:e.t(v.value.DriverEnt?v.value.DriverEnt.Mobile:"")}:{}):{},{Z:v.value.Memo},v.value.Memo?{aa:e.t(v.value.Memo)}:{},{ab:e.t(v.value.CreatorTime),ac:e.sr(d,"9e3db46e-6",{k:"mapModal"}),ad:e.sr(m,"9e3db46e-7",{k:"stepModal"})})}};wx.createPage(u);
