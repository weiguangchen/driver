"use strict";const e=require("../common/vendor.js"),t=require("./token.js"),r=require("../stores/user.js");var n=new(require("../js_sdk/luch-request/luch-request/core/Request.js").Request);n.config.timeout=6e4,n.config.baseURL="http://118.195.244.32:28012",n.interceptors.request.use((e=>{var n;r.useUserStore();const o=t.getToken();return e.header={...e.header,Authorization:o?`Bearer ${o.token}`:"",ContentType:e.header["Content-Type"]?e.header["Content-Type"]:"application/json"},e.data={driverId:(null==(n=null==o?void 0:o.userInfo)?void 0:n.Id)??"",...e.data},e})),n.interceptors.response.use((function(r){const n=r.data.code;return 200===n?r.data.data:600!==n?Promise.reject(r.data):void e.index.showModal({title:"提示",content:"登录过期，请重新登陆",showCancel:!1,success(r){r.confirm&&(t.removeToken(),e.index.reLaunch({url:"/pages/index/index"}))}})})),exports.request=n;
