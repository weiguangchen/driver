"use strict";const e=require("../common/vendor.js"),t=require("./token.js"),r=require("../stores/user.js");var n=new(require("../js_sdk/luch-request/luch-request/core/Request.js").Request);n.config.timeout=6e4,n.config.baseURL="https://www.wwwxapp.cn:28065",n.interceptors.request.use((e=>{var r;const n=t.getToken();return e.header={...e.header,Authorization:n?`Bearer ${n.token}`:"",ContentType:e.header["Content-Type"]?e.header["Content-Type"]:"application/json"},e.data={driverId:(null==(r=null==n?void 0:n.userInfo)?void 0:r.Id)??"",...e.data},e})),n.interceptors.response.use((function(t){const n=r.useUserStore(),o=t.data.code;return 200===o?t.data.data:600!==o?Promise.reject(t.data):void e.index.showModal({title:"提示",content:"登录过期，请重新登陆",showCancel:!1,success(t){t.confirm&&(n.logout(),e.index.reLaunch({url:"/pages/index/index"}))}})})),exports.request=n;
