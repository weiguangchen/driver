"use strict";const e=require("../../../../common/vendor.js");function t(e,t){return["[object Object]","[object File]"].includes(Object.prototype.toString.call(e))?Object.keys(e).reduce(((i,s)=>(t.includes(s)||(i[s]=e[s]),i)),{}):{}}function i(e){return e.tempFiles.map((e=>({...t(e,["path"]),url:e.path,size:e.size})))}exports.chooseFile=function({accept:s,multiple:a,capture:c,compressed:u,maxDuration:o,sizeType:r,camera:p,maxCount:m}){return new Promise(((n,l)=>{switch(s){case"image":e.index.chooseImage({count:a?Math.min(m,9):1,sourceType:c,sizeType:r,success:e=>n(function(e){return e.tempFiles.map((e=>({...t(e,["path"]),type:"image",url:e.path,thumb:e.path,size:e.size})))}(e)),fail:l});break;case"media":e.wx$1.chooseMedia({count:a?Math.min(m,9):1,sourceType:c,maxDuration:o,sizeType:r,camera:p,success:e=>n(function(e){return e.tempFiles.map((i=>({...t(i,["fileType","thumbTempFilePath","tempFilePath"]),type:e.type,url:i.tempFilePath,thumb:"video"===e.type?i.thumbTempFilePath:i.tempFilePath,size:i.size})))}(e)),fail:l});break;case"video":e.index.chooseVideo({sourceType:c,compressed:u,maxDuration:o,camera:p,success:e=>n(function(e){return[{...t(e,["tempFilePath","thumbTempFilePath","errMsg"]),type:"video",url:e.tempFilePath,thumb:e.thumbTempFilePath,size:e.size}]}(e)),fail:l});break;case"file":e.wx$1.chooseMessageFile({count:a?m:1,type:s,success:e=>n(i(e)),fail:l});break;default:e.wx$1.chooseMessageFile({count:a?m:1,type:"all",success:e=>n(i(e)),fail:l})}}))};
